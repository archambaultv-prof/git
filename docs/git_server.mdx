---
sidebar_position: 8
sidebar_label: Travailler  avec un serveur distant
description: Travailler avec un serveur distant
---

# Travailler avec un serveur distant

Git est un outil de gestion de versions qui permet de suivre les modifications
apportées à un projet. Il est souvent utilisé en conjonction avec un serveur
distant, tel que GitHub ou GitLab pour faciliter la collaboration
entre plusieurs développeurs.

La façon la plus courante de travailler avec un serveur distant est de
cloner un dépôt distant sur votre machine locale, de faire des modifications,
puis de pousser ces modifications vers le serveur distant. Voici les étapes
générales pour travailler avec un serveur distant.

## Cloner un dépôt distant

Utilisez la commande `git clone` pour récupérer une copie du dépôt distant sur
votre machine locale. Par exemple, pour cloner le dépôt
`git-commit` de l'utilisateur `archambaultv-prof`, vous pouvez utiliser la commande suivante :

```bash
git clone https://github.com/archambaultv-prof/git-commit.git
cd git-commit
```

Si vous n'êtes pas certain de l'URL du dépôt, vous pouvez la trouver sur la page
du dépôt sur GitHub ou GitLab, généralement dans un champ de texte intitulé
"Clone", "Code" ou "Clone with HTTPS".

![Cloner un dépôt distant](/img/clone_url.png)

## Faire des modifications

Ici, nous allons simplement modifier un fichier existant.

```bash
echo "Le Cerveau de l'apocalypse" > fichierA.txt
git add fichierA.txt
git commit -m "L'agent Jean"
```

Maintenant, si nous vérifions l'état du dépôt, nous verrons que les modifications
ont été validées et sont prêtes à être poussées vers le serveur distant.

```bash
git status
On branch main
Your branch is ahead of 'origin/main' by 1 commit.
  (use "git push" to publish your local commits)

nothing to commit, working tree clean
```

Git nous informe en effet que notre branche locale `main` est en avance sur la branche
`main` du serveur distant `origin` d'un commit.

## Les serveurs distants et origin

Git est bien sûr au courant de l'état du dépôt en local sur la machine. Mais il peut aussi
être au courant de l'état de dépôts distants. Ceux-ci sont appelés
"remotes" en anglais. Le dépôt distant par défaut est nommé `origin`. Lorsque vous clonez un dépôt,
Git crée automatiquement une référence vers le dépôt distant sous le nom `origin`.

Pour voir les dépôts distants configurés, vous pouvez utiliser la commande `git remote -v` :

```bash
git remote -v
origin  https://github.com/archambaultv-prof/git-commit.git (fetch)
origin  https://github.com/archambaultv-prof/git-commit.git (push)
```

Pour mettre à jour les informations sur le dépôt distant, vous pouvez utiliser la commande :
```bash
git fetch origin
```

Cela va récupérer les dernières modifications du dépôt distant sans les
fusionner dans votre branche locale. À l'inverse, pour pousser vos
modifications vers le dépôt distant, vous pouvez utiliser la commande `git push` :

```bash
git push
```

Toutefois, vous n'avez pas les droits d'accès en écriture sur le dépôt
`git-commit` de l'utilisateur `archambaultv-prof`.

### Créer son dépôt GitHub et ajouter un deuxième remote

De façon générale, vous travaillez sur votre propre dépôt distant. Toutefois,
si vous venez de cloner un dépôt et que vous n'avez pas les droits d'accès en
écriture, vous devez créer un nouveau dépôt distant sur GitHub ou GitLab, puis
ajouter ce dépôt comme remote.

1. Connectez-vous à votre compte GitHub et cliquez sur le bouton "New".

    ![Créez un nouveau dépôt](/img/github_new_1.png)

2. Remplissez les informations du dépôt :
   - **Repository name** : le nom de votre dépôt. Évitez les espaces, les
     accents et les caractères spéciaux, utilisez plutôt des tirets ou des
     underscores.
   - **Description** : une courte description de votre projet.
   - **Public/Private** : choisissez si vous voulez que votre dépôt soit public ou privé.
   - **Initialize this repository with a README** : cochez cette case si vous
     souhaitez initialiser le dépôt avec un fichier README.

    ![Créez un nouveau dépôt](/img/github_new_2.png)

Une fois que vous avez rempli les informations, cliquez sur le bouton "Create repository".
Vous pouvez ensuite copier l'URL du dépôt distant.

### Ajouter le dépôt distant

Par défaut, Git a nommé le dépôt distant `origin` lors du clonage. Mais il serait intéressant
de le renommer pour éviter toute confusion. En effet, `origin` est le nom par défaut
et il devrait être celui sur lequel vous avez les droits d'accès en écriture.

La première étape (optionnelle) consiste à renommer le dépôt distant `origin` en `upstream` :

```bash
git remote rename origin upstream
```

Ensuite, pour ajouter votre dépôt distant comme remote, utilisez la commande `git remote add` :

:::warning

Assurez-vous de remplacer `username` par votre nom d'utilisateur GitHub et
`git-commit` par le nom de votre dépôt.

:::

```bash
git remote add origin https://github.com/username/git-commit.git
```

